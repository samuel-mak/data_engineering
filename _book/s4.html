<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Engineering - R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./odbc.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="quarto_books_style_1.css">
</head>

<body class="nav-sidebar floating fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./s4.html"><span class="chapter-title">R</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Engineering</a> 
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">The basic data engineering shits to know as analysts in an organisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./s4.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./odbc.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Working with DBMS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_and_dbms.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Working with DBMS using R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">May 14, 2024</p>
    </div>
  </div>
    
  </div>
  

</header>

<p><strong>Object-Oriented Programming (OOP) in R</strong></p>
<ul>
<li><strong>Introduction</strong>
<ul>
<li>R has 3 native OOP systems through the <code>base</code> package and other add-on OOP systems from other external packages:
<ul>
<li>Native OOP systems in R
<ul>
<li>S3</li>
<li>S4</li>
<li>Reference Class (RC)</li>
</ul></li>
<li>Add-on OOP systems in R
<ul>
<li>OOP with References Using Standard R Code through the <code>R.oo</code> package <span class="citation" data-cites="bengtsson_2003">(<a href="references.html#ref-bengtsson_2003" role="doc-biblioref">Bengtsson, 2003</a>)</span></li>
<li>Prototype Programming through the <code>proto</code> package <span class="citation" data-cites="kates_petzoldt_2016">(<a href="references.html#ref-kates_petzoldt_2016" role="doc-biblioref">Grothendieck et al., 2016</a>)</span></li>
<li>Encapsulated OOP through the <code>R6</code> package <span class="citation" data-cites="chang_2021">(<a href="references.html#ref-chang_2021" role="doc-biblioref">Chang, 2021</a>)</span></li>
<li>“R7” OOP through the <code>R7</code> package (still under development)</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<section id="s3" class="level2">
<h2 class="anchored" data-anchor-id="s3">S3</h2>
<ul>
<li><strong>Introduction</strong>
<ul>
<li>An OOP system developed by John Chambers, Rick Becker and colleagues at Bell Labs in the early 1990s for the S programming language and implemented for the R programming language</li>
<li>It is named “S3” it was developed for version 3 of the S programming language</li>
<li>The simplest OOP system that an OOP could possibly be ## S4</li>
</ul></li>
</ul>
<p><strong>Introduction</strong></p>
<ul>
<li>An OOP system developed by John Chambers and members of the R Core Team in the mid-1990s for the S programming language and is implemented in the R programming language</li>
<li>It was developed and introduced as a more formal, rigorous, and complex OOP system than S3</li>
<li>It is named “S4” because it was developed for version 4 of the S programming language</li>
<li>Below gives a brief practical introduction to S4 (there are more to what’s mentioned below)</li>
<li>R packages using S4 include <code>EBImage</code> by Bioconductor and <code>Matrix</code> by Douglas Bates and Martin Maechler</li>
<li><strong>Features of S4:</strong>
<ul>
<li>Methods belong to functions</li>
<li>Follows a more functional programming style</li>
<li>More formal and rigorous than S3</li>
<li>Classes have formal definitions for their fields and inheritance (thus more formal and rigorous than S3)</li>
<li>Multiple dispatch (thus more complicated than S3)</li>
<li>Multiple inheritance (thus more complicated than S3)</li>
</ul></li>
<li><strong>Example</strong>
<ul>
<li>An example case is used to demonstrate the fundamentals of the S4 OOP system. In this example, the analytical flow of three data-learning models, specifically, the specification, fitting, and accessing parameters of the General Linear Model, the Generalised Linear Model, and the Neural Network Model, are implemented using the S4 OOP system.</li>
<li>Note that the relationship between the General Linear Model and the Generalised Linear Model can be viewed differently, depending on specific goals (e.g.&nbsp;pedagogy, implementation). It can be viewed that the Generalised Linear Model is a general class of models that includes the General Linear Model as a special case where the identity function is the link, this tends to be viewed in the field of statistics. It can also be viewed that the General Linear Model is a general class which includes the Generalised Linear Model as an extension by adding the link function, this view is more in line with the concept of classes in object-oriented programming. While both views are valid, the latter view is adapted to demonstrate the inheritance of classes in the S4 OOP system.</li>
</ul></li>
</ul>
<p><strong>Classes</strong></p>
<ul>
<li><strong>Introduction</strong>
<ul>
<li>S4 classes have a more formal definition than S3 classes</li>
<li>An S4 class is defined by the name of the class, a set of parameters and their data types</li>
<li>The set of parameters is referred to as the “representation” and individual parameters are referred to as “slots” or “representations” (conceptualised as similar to the concept of “attributes” in S3 classes)</li>
</ul></li>
<li><strong>Class creation</strong>
<ul>
<li>The <code>setClass</code> function creates an S4 class with its definition specified through its arguments and returns an object generator function of the class (hereinafter referred to as “generator function”).</li>
<li>The generator function provides one of two ways of creating objects of the class (more details in the objects section). More relevant here is that purely calling <code>setClass</code> would only return the generator function (and create the class) but not registering the returned generator function as an object in the variable environment that could be used. The output of <code>setClass</code> needs to be assigned to an object, ideally with its name the same as the class name for clarity, for the generator function to be used. As mentioned, the generator function is only one of two ways of creating objects of the class, hence, creating a class by simply calling <code>setClass</code> without assigning the output to an object is sufficient, but additionally assigning the output to an object is recommended as this eliminates any ambiguity if two classes from different packages have the same name with relative ease.</li>
<li>The <code>setClass</code> function has the general usage
<ul>
<li><code>class_name &lt;- setClass(Class = "class_name", representation, prototype, contains)</code>
<ul>
<li><strong><em>Where</em></strong>
<ul>
<li>The <code>Class</code> argument specifies the name of the class</li>
<li>The <code>representation</code> argument specifies the representation and the data types of the slots</li>
<li>The <code>prototype</code> argument specifies the default values of the slots, these must conform to their specified data types</li>
<li>The <code>contains</code> argument specifies any subclasses of the class from which slots are inherited</li>
<li></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Example</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create some data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>attainment_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ks1_maths =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ks2_maths =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ks2_science =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ks2_english =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ks2_art =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">school_teaching_quality =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>),</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">idaci =</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">15</span>)),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ses =</span> <span class="fu">rpois</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">lambda =</span> <span class="dv">5</span>),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">home_to_school_travel_time =</span> <span class="fu">rpois</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">lambda =</span> <span class="dv">50</span>),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">diet_quality =</span> <span class="fu">rpois</span>(<span class="at">n =</span> <span class="dv">100</span>, <span class="at">lambda =</span> <span class="dv">10</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a class "general_linear_model" that's defined by two slots of "y", an outcome as a character string/vector with no default values, and "x", the predictors as a character string/vector with an NA character as the default value </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">Class =</span> <span class="st">"general_linear_model"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">representation =</span> <span class="fu">representation</span>(</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"character"</span>, <span class="co"># The outcome</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"character"</span> <span class="co"># The predictor(s)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">prototype =</span> <span class="fu">prototype</span>(</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NA_character_</span> <span class="co"># Setting an NA character as the default for "x"</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a class "generalised_linear_model" defined by (slots in) its superclass "general_linear_model" while extending it by adding a slot "family" for the link function. Assign the output (the returning generator function) to an object "generalised_linear_model", so that this object can be used as its generator function.</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>generalised_linear_model <span class="ot">&lt;-</span> <span class="fu">setClass</span>(</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">Class =</span> <span class="st">"generalised_linear_model"</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">representation =</span> <span class="fu">representation</span>(</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"function"</span> <span class="co"># The link function</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">prototype =</span> <span class="fu">prototype</span>(</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> identity  <span class="co"># Setting the identity function as the default link function </span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">contains =</span> <span class="st">"general_linear_model"</span> <span class="co"># Specifying that the "generalised_linear_model" class is a subclass/childclass/extension/special case of the superclass/parentclass "general_linear_model" (it contains all the slots of the "general_linear_model" class). This effectively inherits all class definitions of the class "general_linear_model" (i.e. "x" and "y"). Hence, this class has a total of three slots.</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a class "neural_network_model" defined by slots of "x", the predictors, and "y", the outcomes</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>neural_network_model <span class="ot">&lt;-</span> <span class="fu">setClass</span>(</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">Class =</span> <span class="st">"neural_network_model"</span>,</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">representation =</span> <span class="fu">representation</span>(</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"character"</span>,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"character"</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Access basic properties of the class "generalised_linear_model"</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="fu">showClass</span>(<span class="st">"generalised_linear_model"</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Access whether "generalised_linear_model" is an extension of "general_linear_model"</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="fu">extends</span>(<span class="at">class1 =</span> <span class="st">"generalised_linear_model"</span>, <span class="at">class2 =</span> <span class="st">"general_linear_model"</span>)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing the class "general_linear_model"</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="co"># removeClass("general_linear_model")</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Removing a parent class does not remove its children, though, the inheritance structure would be lost and the children wouldn't be children </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Instances</strong></p>
<ul>
<li><strong>Introduction</strong>
<ul>
<li>Instances are objects (instance object) representing cases of a class that take on specific slot values</li>
<li>Instances of a subclass are also instances of its superclasses, however, instances of a superclass are not instances of their subclasses. This affects methods dispatch.</li>
</ul></li>
<li><strong>instance creation</strong>
<ul>
<li>S4 instances are created by the <code>new</code> function with its class and values of slots specified through its arguments</li>
<li>The <code>new</code> function has the general form
<ul>
<li><code>new(Class, ...)</code>
<ul>
<li><strong><em>Where</em></strong>
<ul>
<li>The <code>Class</code> argument specifies the name of the class the instance is of</li>
<li><code>...</code> is the set of slots of the specified class as arguments that specify values of the slots for the instance</li>
</ul></li>
</ul></li>
</ul></li>
<li>S4 instances of a class can also be created indirectly by its generator function with its values of slots specified through its arguments (applicable only if the generator function exists as a function object), calling the generator function would in turn call the <code>new</code> function to create the instance</li>
<li>The generator function has similar form as the <code>new</code> function (only difference is that it doesn’t have the <code>Class</code> argument because it has been specified)
<ul>
<li><code>generator_function(...)</code>
<ul>
<li><strong><em>Where</em></strong>
<ul>
<li><code>generator_function</code> is the name of the generator function</li>
<li><code>...</code> is the set of slots of the specified class as arguments that specify values of the slots for the instance</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Access and modify values of slots of instances</strong>
<ul>
<li>Values of slots of instances can be assessed using two methods, either through the <code>@</code> symbol (<code>instance@slot_name</code>) or the <code>slot</code> function (<code>slot(object  = instance, name = "slot_name")</code>)</li>
<li>Assessed values can then be modified using the assignment operator <code>&lt;-</code> (i.e.&nbsp;<code>instance@slot_name &lt;- value</code> or <code>slot(instance, "slot_name") &lt;- value</code>)</li>
</ul></li>
<li><strong>Example</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an instance of class "general_linear_model" using the new function with the value of "y" being "ks2" and values of "x" being "ks1_maths" and "school_teaching_quality"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>maths_general_linear_model <span class="ot">&lt;-</span> <span class="fu">new</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Class =</span> <span class="st">"general_linear_model"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="st">"ks2_maths"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"ks1_maths"</span>, <span class="st">"school_teaching_quality"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Access properties of the instance "maths_general_linear_model"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(maths_general_linear_model)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Access whether the object "maths_general_linear_model" is an object of an S4 class</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">isS4</span>(maths_general_linear_model)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an instance of class "generalised_linear_model" using its generator function (as the generator function exists in the form of an object in the environment)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>maths_generalised_linear_model <span class="ot">&lt;-</span> <span class="fu">generalised_linear_model</span>(</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="st">"ks2_maths"</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"ks1_maths"</span>, <span class="st">"school_teaching_quality"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second instance of class "generalised_linear_model" using its generator function</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>ses_generalised_linear_model <span class="ot">&lt;-</span> <span class="fu">generalised_linear_model</span>(</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="st">"ses"</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="st">"home_to_school_travel_time"</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="cf">function</span>()identity</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an instance of class "neural_network_nodel" using its generator function</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>science_neural_network_model <span class="ot">&lt;-</span> <span class="fu">neural_network_model</span>(</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="st">"ks2_science"</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"ses"</span>, <span class="st">"idaci"</span>, <span class="st">"home_to_school_travel_time"</span>, <span class="st">"diet_quality"</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Access the value of slot "y" in the instance "maths_generalised_linear_model" using the "@" operator</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>maths_generalised_linear_model<span class="sc">@</span>y</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Access the value of a specific slot "x" in the instance "maths_generalised_linear_model" using the `slot` function</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="fu">slot</span>(maths_generalised_linear_model, <span class="st">"x"</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the value of the slot "family" in the instance "ses_generalised_linear_model" using the "@" operator</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>ses_generalised_linear_model<span class="sc">@</span>family <span class="ot">&lt;-</span> <span class="cf">function</span>()<span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">"log"</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the value of the slot "x" in the instance "maths_generalised_linear_model" using the `slot` function</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="fu">slot</span>(maths_generalised_linear_model, <span class="st">"x"</span>) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ks1_maths"</span>, <span class="st">"school_teaching_quality"</span>, <span class="st">"idaci"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Generic functions (Generics), Methods, and Methods Dispatch</strong></p>
<ul>
<li><strong>Introduction</strong>
<ul>
<li><strong>Generics and methods</strong>
<ul>
<li>A generic is a function that can take different input (in terms of the class of the inputs to the arguments and/or the set of arguments) and operate and/or behave in different specific ways according to the input upon being called</li>
<li>This is done by the generic having a set of associated methods, which are functions that implement for specific cases in terms of the inputs to the arguments to the generic, and having the generic dispatch to one of its methods upon being called through a process called methods dispatch, which involves matching and identifying the most appropriate method and passing the inputs to the arguments to the generic to that method</li>
</ul></li>
<li><strong>Inheritance</strong>
<ul>
<li>Since instances of a subclass are also instances of its superclasses, methods defined for instances of a superclass are also applicable to instances of its subclasses. However, since instances of a superclass are not instances of their subclasses, methods defined for instances of a subclass are not applicable to instances of its superclasses</li>
</ul></li>
</ul></li>
<li><strong>Creating a generic</strong>
<ul>
<li>The <code>setGeneric</code> function creates or coerces an existing function as an S4 generic</li>
<li>The <code>setGeneric</code> function has the general form:
<ul>
<li><code>setGeneric(name, def)</code>
<ul>
<li><strong><em>Where</em></strong>
<ul>
<li><code>name</code> is the name of the generic</li>
<li><code>def</code> is the “skeleton” of the generic or the non-generic (default) method of the generic as a function. This function should also include the <code>standardGeneric</code> function (specifically <code>standardGeneric(f = "generic_name")</code>) for initiating the S4 methods dispatch mechanism. (All of these are needed only when creating a generic)</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Creating a method</strong>
<ul>
<li>The <code>setMethod</code> function creates a method for a generic</li>
<li>The <code>setMethod</code> function has the general form
<ul>
<li><code>setMethod(f, definition)</code>
<ul>
<li><strong><em>Where</em></strong>
<ul>
<li><code>f</code> is the name of the generic</li>
<li><code>signature</code> is the case of the classes of the inputs to the arguments to the generic for the method specified through the <code>signature</code> function</li>
<li><code>definition</code> is the method for the generic as a function</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>Tools</strong>
<ul>
<li>All signatures of a generic can be assessed by the <code>showMethod</code> function (<code>showMethod(f = generic)</code>)</li>
<li>All generics and their signatures of a class can be assessed by the <code>showMethods</code> function (<code>showMethods(classes = "classname")</code></li>
<li>The <code>callNextMethod</code> function is used within the input (function) to the <code>definition</code> argument inside the <code>setMethod</code> function, this is used to call the next most appropriate method (as if the current method doesn’t exist)</li>
<li>The <code>removeMethod</code> function removes a method from a generic (<code>removeMethod(f = "generic_name", signature = signature(argument_1 = "class_a", argument_2 = "class_b",...))</code>)</li>
<li>The <code>removeGeneric</code> function removes a generic (<code>removeGeneric(f = "generic_name")</code>)</li>
</ul></li>
<li><strong>Methods Dispatch</strong>
<ul>
<li>Methods dispatch is the process in which the most appropriate method of a generic is selected to be executed with the inputs to the generic upon being called based on R’s selection criteria/algorithm</li>
<li><details>
<summary>
The process in detail
</summary>
<ul>
<li>The generic is called with specified inputs to its arguments</li>
<li>The classes of the input to the arguments to the generic are identified</li>
<li>Methods matching and selection</li>
<li>The inputs to the generic are compared with the defined inputs to each of the methods in their signatures</li>
<li>The set of specified arguments in the generic being called is compared to the set of arguments to each of the methods</li>
<li>If none of the methods has the same set of arguments in their signatures as the arguments that’s being specified in the generic called, an error is returned to with a message informing that there are unused arguments</li>
<li>If there exists some methods with the same set of arguments in their signatures as the arguments that’s being specified in the generic called, if there is only one method, the method is selected and executed, if there are multiple methods, then those methods are selected for further matching and selection</li>
<li>The classes of the inputs to the arguments to the generic called are compared with the defined classes of the inputs to the arguments to each of the methods in their signatures</li>
<li>If the class of the input to at least one argument to the generic called is different to and is not a subclass of the class defined for the corresponding argument to all the methods, then an error is returned with a message informing that no methods exist for inputs of that class</li>
<li>If the class of the input to all the arguments to the generic called is exactly the same as or a subclass of the defined class of the inputs to corresponding arguments to some methods in their signatures, if there is only one method, then the method is selected and executed, if there are multiple methods, then those methods are selected for further matching and selection</li>
<li>The classes of the inputs to the arguments to the generic called are compared to the defined classes of the inputs to the arguments to each of the methods in their signatures in terms of their closeness in class membership/the inheritance hierarchy. Due to previous selections, classes of the inputs to the arguments to the generic called are either exactly the same or subclasses of the classes of the inputs to the corresponding arguments to the methods, hence, closeness refers to whether the classes are exactly the same or, if not, how many generations the classes in the generic are from the classes in the methods.</li>
<li>A distance is calculated to represent the closeness between the set of classes in the generic called and the set of classes a method (generic-method pair)</li>
<li>For each generic-method pair, for each arguments, if the class of the input to the method is the same as that to the generic, then a distance of 0 is given, if the class of the input to the method is a parent to the class of the input to the generic, a distance is 1 is given, if the class of the input to the method is a grandparent to the class of the input to the generic, a distance of 2 is given, and so on. This is calculated for all arguments. Then the distances are summed over the arguments for that generic-method pair to give the total distance for the generic-method pair. This is done to all generic-method pairs. All generic-method pairs are compared in terms of their distances. The method with the smallest distance is selected and executed, however, if there are multiple methods with the smallest distance (i.e.&nbsp;ties), then they are selected for further selection</li>
<li>It is recommended not to design generics that go beyond this level of ambiguity, hence, further selections are not covered in detail, but basically, it selects based on the order of the arguments and then the order of the definition of the methods (methods defined earlier are given higher priority)
</li></ul></details></li>
</ul></li>
</ul>
<li><strong>Example</strong></li>

<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a generic "model_description" that takes one or two models and summarises/compares them</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setGeneric</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"model_description"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">def =</span> <span class="cf">function</span>(<span class="at">model_1 =</span> <span class="cn">NULL</span>, <span class="at">model_2 =</span> <span class="cn">NULL</span>){ <span class="co"># The generic is defined to have two generic arguments "model_1" and "model_2" for specifying the models to be described/compared</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">standardGeneric</span>(<span class="at">f =</span> <span class="st">"model_description"</span>) <span class="co"># This is for initiating the S4 methods dispatch mechanism </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">valueClass =</span> <span class="st">"character"</span> <span class="co"># Defines the output to be of class character</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a generic "fit" that would take a model specification and data and fit the specified model to the data </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">setGeneric</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"fit"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">def =</span> <span class="cf">function</span>(<span class="at">model =</span> <span class="cn">NULL</span>, data){</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">standardGeneric</span>(<span class="at">f =</span> <span class="st">"fit"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Coerce the summary function (an existing function) as an S4 generic</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># The goal of this is to use this generic summary to summarise the models fitted by the fit generic by adding specific S4 methods to it later </span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="fu">setGeneric</span>(<span class="at">name =</span> <span class="st">"summary"</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a method for the generic "model_description" for the case when the input to both arguments are of the class "general_linear_model"</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"model_description"</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">model_1 =</span> <span class="st">"general_linear_model"</span>, <span class="at">model_2 =</span> <span class="st">"general_linear_model"</span>),</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(model_1, model_2){</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(model_1<span class="sc">@</span>y <span class="sc">==</span> model_2<span class="sc">@</span>y){</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">identical</span>(<span class="fu">unlist</span>(model_1<span class="sc">@</span>x), <span class="fu">unlist</span>(model_2<span class="sc">@</span>x))){</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"Both models are General Linear Models and have the same outcome and predictors"</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>      }<span class="cf">else</span>{</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are General Linear Models and have the same outcome and but different predictors"</span>)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">identical</span>(<span class="fu">unlist</span>(model_1<span class="sc">@</span>x), <span class="fu">unlist</span>(model_2<span class="sc">@</span>x))){</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"Both models are General Linear Models and but have a different outcome and same predictors"</span>)</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>      }<span class="cf">else</span>{</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are General Linear Models and have different outcome and predictors "</span>)</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second method for the generic "model_description" for the case when the input to both arguments are of the class "generalised_linear_model"</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"model_description"</span>,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">model_1 =</span> <span class="st">"generalised_linear_model"</span>, <span class="at">model_2 =</span> <span class="st">"generalised_linear_model"</span>),</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(model_1, model_2){</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(model_1<span class="sc">@</span>y <span class="sc">==</span> model_2<span class="sc">@</span>y){</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">identical</span>(<span class="fu">unlist</span>(model_1<span class="sc">@</span>x), <span class="fu">unlist</span>(model_2<span class="sc">@</span>x))){</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(model_1<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family <span class="sc">==</span> model_2<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family){</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have the same outcome, predictors, and family"</span>)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>        }<span class="cf">else</span>{</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have the same outcome and predictors but different families"</span>)</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>      }<span class="cf">else</span>{</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(model_1<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family <span class="sc">==</span> model_2<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family){</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have the same outcome and family but different predictors"</span>)</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>        }<span class="cf">else</span>{</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have the same outcome but different predictors and families"</span>)</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">identical</span>(<span class="fu">unlist</span>(model_1<span class="sc">@</span>x), <span class="fu">unlist</span>(model_2<span class="sc">@</span>x))){</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(model_1<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family <span class="sc">==</span> model_2<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family){</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have same predictors and family but a different outcome"</span>)</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>        }<span class="cf">else</span>{</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have same predictors but a different outcome and families"</span>)</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and have same predictors but a different outcome "</span>)</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>      }<span class="cf">else</span>{</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(model_1<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family <span class="sc">==</span> model_2<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family){</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models and the same family but different outcome and predictors"</span>)</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>        }<span class="cf">else</span>{</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(<span class="st">"Both models are Generalised Linear Models but have different outcome, predictors and families"</span>)</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Access all signatures of the generic "model_description"</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="fu">showMethods</span>(<span class="at">f =</span> model_description)</span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Access all generics and their signatures of objects of the class "general_linear_model"</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="fu">showMethods</span>(<span class="at">class =</span> <span class="st">"general_linear_model"</span>)</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a method for the fit generic for the case when the input to the model argument is of the class "general_linear_model"</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the output of this method to be of an S4 class "general_linear_model_fit". To do that, the class "general_linear_model_fit" and its generator function need to be created first before defining the method as the generator function would be used within the method to define the class of the output of the method </span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>general_linear_model_fit <span class="ot">&lt;-</span> <span class="fu">setClass</span>(<span class="st">"general_linear_model_fit"</span>, <span class="at">representation =</span> <span class="fu">representation</span>(<span class="at">call =</span> <span class="st">"character"</span>, <span class="at">coefficients =</span> <span class="st">"ANY"</span>))</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"fit"</span>,</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">model =</span> <span class="st">"general_linear_model"</span>),</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(model, data){</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(model<span class="sc">@</span>y, <span class="st">" ~ "</span> ,<span class="fu">paste0</span>(<span class="fu">unlist</span>(model<span class="sc">@</span>x), <span class="at">collapse =</span> <span class="st">" + "</span>))</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>    general_linear_model_fit_object <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">formula =</span> formula, <span class="at">data =</span> data)</span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>    general_linear_model_fit_call <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">as.character</span>(general_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">1</span>]), <span class="st">"("</span>, <span class="fu">as.character</span>(general_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">2</span>]), <span class="st">", "</span>,<span class="fu">as.character</span>(general_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">3</span>]), <span class="st">")"</span>)</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">general_linear_model_fit</span>(<span class="at">call =</span> general_linear_model_fit_call, <span class="at">coefficients =</span> general_linear_model_fit_object<span class="sc">$</span>coefficients))</span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second method for the fit generic for the case when the input to the model argument is of the class "generalised_linear_model"</span></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the output of this method to be of an S4 class "generalised_linear_model_fit". Similarly, this class and its generator function are created first before defining the method. In addition, "generalised_linear_model_fit" is defined to be a children of "general_linear_model_fit", this is used to demonstrate that methods defined for instance objects of a class would also be applicable to instance objects of its subclass (but not the other way round).</span></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>generalised_linear_model_fit <span class="ot">&lt;-</span> <span class="fu">setClass</span>(<span class="st">"generalised_linear_model_fit"</span>, <span class="at">contains =</span> <span class="st">"general_linear_model_fit"</span>)</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"fit"</span>,</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">model =</span> <span class="st">"generalised_linear_model"</span>),</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(model, data){</span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(model<span class="sc">@</span>y, <span class="st">" ~ "</span> ,<span class="fu">paste0</span>(<span class="fu">unlist</span>(model<span class="sc">@</span>x), <span class="at">collapse =</span> <span class="st">" + "</span>))</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>    generalised_linear_model_fit_object <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">formula =</span> formula, <span class="at">data =</span> data, <span class="at">family =</span> model<span class="sc">@</span><span class="fu">family</span>()<span class="sc">$</span>family)</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>    generalised_linear_model_fit_call <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">as.character</span>(generalised_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">1</span>]), <span class="st">"("</span>, <span class="fu">as.character</span>(generalised_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">2</span>]), <span class="st">", "</span>,<span class="fu">as.character</span>(generalised_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">3</span>]), <span class="st">", "</span>,<span class="fu">as.character</span>(generalised_linear_model_fit_object<span class="sc">$</span>call[<span class="dv">4</span>]), <span class="st">")"</span>)</span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">generalised_linear_model_fit</span>(<span class="at">call =</span> generalised_linear_model_fit_call, <span class="at">coefficients =</span> generalised_linear_model_fit_object<span class="sc">$</span>coefficients))</span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a third method for the fit generic for the case when the input to the model argument is of the class "neural_network_model"</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a><span class="co"># The class of the output of this method is defined to be "nn" by the neuralnet::neuralnet function</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"fit"</span>,</span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">model =</span> <span class="st">"neural_network_model"</span>),</span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(model, data){</span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(model<span class="sc">@</span>y, <span class="st">" ~ "</span> ,<span class="fu">paste0</span>(<span class="fu">unlist</span>(model<span class="sc">@</span>x), <span class="at">collapse =</span> <span class="st">" + "</span>))</span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>    neural_network_model_fit_object <span class="ot">&lt;-</span> neuralnet<span class="sc">::</span><span class="fu">neuralnet</span>(<span class="at">formula =</span> formula, <span class="at">data =</span> data, <span class="at">linear.output =</span> F)</span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(neural_network_model_fit_object)</span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a same method for the summary generic for the case when the input to the object argument is either an instance of the class "general_linear_model_fit" or "generalised_linear_model_fit"</span></span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a><span class="co"># Since the class "general_linear_model_fit" is a superclass of its subclass "generalised_linear_model_fit", as defined in the inheritance structure when creating the class "generalised_linear_model_fit", any methods defined for instances of the class "general_linear_model_fit" would also be applicable to instances of the class "generalised_linear_model_fit".</span></span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a><span class="co"># This means that to create a method for objects of both the parent and child classes "general_linear_model_fit" or "generalised_linear_model_fit", the method only needs to be defined for the parent class "general_linear_model_fit"</span></span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"summary"</span>,</span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">object =</span> <span class="st">"general_linear_model_fit"</span>),</span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(object, <span class="at">show_beta =</span> F){</span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(object<span class="sc">@</span>call)</span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(show_beta){</span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a>    object<span class="sc">@</span>coefficients}</span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second method for the summary generic for the case when the input to the object argument is an instance of the class "neural_network_model_fit" in a way that the arguments to the summary generic would change accordingly, specifically, the "show_beta" argument would be removed and a new argument would be added, further, the "plot_model" argument can take inputs of different classes causing the summary function to operate differently by nesting another generic, specifically called "summary_2" in the method. Accordingly, the "summary" and "summary_2" generics may be referred to as the main/external and internal generics. This is to show how a generic can have different sets of arguments depending on the class of the inputs to one or more generic arguments and those new arguments can take inputs of different classes and operate differently according to them. This complex scenario is rare though.</span></span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the internal generic "summary_2" that would be nested within the methods of the main generic "summary" later </span></span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a><span class="fu">setGeneric</span>(</span>
<span id="cb3-155"><a href="#cb3-155" aria-hidden="true" tabindex="-1"></a>  <span class="st">"summary_2"</span>, </span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a>  <span class="at">def =</span> <span class="cf">function</span>(object, plot_model){</span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a>    <span class="fu">standardGeneric</span>(<span class="at">f =</span> <span class="st">"summary_2"</span>)</span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a method for the internal generic "summary_2" for the case when the input to the argument "plot_model" is of the class "logical" </span></span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"summary_2"</span>, </span>
<span id="cb3-164"><a href="#cb3-164" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">plot_model =</span> <span class="st">"logical"</span>),</span>
<span id="cb3-165"><a href="#cb3-165" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(object, plot_model){</span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">"Input of the plot_model argument is logical"</span>)</span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>            <span class="co">#print(object$call)</span></span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(plot_model){<span class="fu">plot</span>(object)}</span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a>          })</span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a second method for the internal generic "summary_2" for the case when the input to the argument "plot_model" is of the class "numeric"</span></span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"summary_2"</span>, </span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">plot_model =</span> <span class="st">"numeric"</span>),</span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(object, plot_model){</span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">"Input of the plot_model argument is an numeric"</span>)</span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(object<span class="sc">$</span>call)</span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(plot_model <span class="sc">==</span> <span class="dv">1</span>){<span class="fu">plot</span>(object)}</span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a method for the main generic "summary" for the case when input to the "object" argument is of the class "nn" (the neural network model fit)</span></span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(</span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="st">"summary"</span>,</span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a>  <span class="at">signature =</span> <span class="fu">signature</span>(<span class="at">object =</span> <span class="st">"nn"</span>),</span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a>  <span class="at">definition =</span> <span class="cf">function</span>(object, plot_model){<span class="fu">summary_2</span>(<span class="at">object =</span> object, <span class="at">plot_model =</span> plot_model)}</span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a><span class="co"># Show how it all works in practice</span></span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the models to the data using the fit generic</span></span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a><span class="co"># The fit generic can take various model specifications of various types of model and fit to the same data accordingly </span></span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a><span class="co"># Fitting a General Linear Model</span></span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a>maths_general_linear_model_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(<span class="at">model =</span> maths_general_linear_model, <span class="at">data =</span> attainment_data)</span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a><span class="co"># Fitting a Generalised Linear Model </span></span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a>ses_generalised_linear_model_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(<span class="at">model =</span> ses_generalised_linear_model, <span class="at">data =</span> attainment_data)</span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a><span class="co"># Fitting a Neural Network Model</span></span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a>science_neural_network_model_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(<span class="at">model =</span> science_neural_network_model, <span class="at">data =</span> attainment_data)</span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a><span class="co"># Access the model properties using the summary generic </span></span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a><span class="co"># The summary generic can take inputs of different classes and change its arguments and operations/output</span></span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(maths_general_linear_model_fit, <span class="at">show_beta =</span> T)</span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ses_generalised_linear_model_fit, <span class="at">show_beta =</span> F)</span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(science_neural_network_model_fit, <span class="at">plot_model =</span> T)</span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(science_neural_network_model_fit, <span class="at">plot_model =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="things-to-add" class="level1">
<h1>Things to add</h1>
<ul>
<li>History of R</li>
<li>How R works</li>
<li>How you work in R</li>
<li>Updating R</li>
<li>Connecting to databases</li>
</ul>
<p>install.packages(“installr”) installr::updater()</p>
<p>This downloads the installer (.exe file) from CRAN (https://cran.r-project.org/bin/windows/base/) and run it. You will go through several installation setup wizards, including one for specifying whether you want to migrate all your packages from your old R to your new. All of these can be done manually, but the updater() function does all of them automatically. Might worth noting that updating R using the installr package only works for Windows, for MacOS, use the updateR package</p>
<p>After all those installation wizards, make sure RStudio is using the latest R version, otherwise change that. To do that, go to the “Tools” tab (in the top-most bar), then go to “Global Options”, this opens an Options dialog box. In the dialog box, go to “General” and then “Basic”. Make sure the “R version” is set to the path to the new R, which may look something like “C:.0”. If not then change it by clicking “change”, which opens another dialog box, and select the appropriate one under “Choose a specific version of R”. Then restart RStudio.</p>
</section>
<section id="updating-r" class="level1">
<h1>Updating R</h1>
<ul>
<li>Download the newest R file from R</li>
<li>The R file includes an .exe installer</li>
<li>Run the .exe file</li>
<li></li>
</ul>
<p>22 Oct 2022 at 9:46</p>
<ul>
<li><p>Multiple dispatch - Methods dispatch can be based on multiple arguments to a generic</p></li>
<li><p>Multiple inheritance - A class can inherit properties from multiple parent classes</p></li>
<li><p>What is R</p></li>
<li><p>R is a programming language and the interpreter of R Rscript is a command line utility (like git) which is used to run R codes in the command line (terminal)</p></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list" style="display: none">
<div id="ref-bengtsson_2003" class="csl-entry" role="listitem">
Bengtsson, H. (2003). <em>The <span class="nocase">R.oo</span> package - object-oriented programming with references using standard <span>R</span> code</em>. <a href="https://www.r-project.org/conferences/DSC-2003/Proceedings/Bengtsson.pdf">https://www.r-project.org/conferences/DSC-2003/Proceedings/Bengtsson.pdf</a>
</div>
<div id="ref-chang_2021" class="csl-entry" role="listitem">
Chang, W. (2021). <em>R6: Encapsulated classes with reference semantics</em>. <a href="https://CRAN.R-project.org/package=R6">https://CRAN.R-project.org/package=R6</a>
</div>
<div id="ref-kates_petzoldt_2016" class="csl-entry" role="listitem">
Grothendieck, G., Kates, L., &amp; Petzoldt, T. (2016). <em>Proto: Prototype object-based programming</em>. <a href="https://CRAN.R-project.org/package=proto">https://CRAN.R-project.org/package=proto</a>
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">The basic data engineering shits to know as analysts in an organisation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./odbc.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-title">Working with DBMS</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>